(()=>{var c=Object.defineProperty;var f=(_,d)=>c(_,"name",{value:d,configurable:!0});(window.webpackJsonp=window.webpackJsonp||[]).push([["TS.web.file"],{"fc/B":function(_,d){(function(){TS.registerModule("web.file",{file_id:null,onStart:function(){TS.web.login_sig.add(TS.web.file.onLogin,TS.web.file,1),TS.files.team_file_changed_sig.add(TS.web.file.teamFileChanged,TS.web.file),TS.files.team_file_comment_deleted_sig.add(TS.web.file.teamFileCommentDeleted,TS.web.file),TS.files.team_file_deleted_success_sig.add(u)},onLogin:function(){if(TS.boot_data.file){var t=TS.files.upsertFile(TS.boot_data.file).file;TS.web.file.file_id=t.id}var l;TS.boot_data.file?l=Promise.all([TS.members.legacyEnsureMembersInDataArePresent(TS.boot_data.file),TS.bots.legacyEnsureBotsInDataArePresent(TS.boot_data.file)]):l=Promise.resolve(),l.then(function(){if(TS.boot_data.file){TS.utility.makeSureAllExternalLinksAreRefererSafe($(".post_body"));var i=TS.files.getFileById(TS.web.file.file_id),n;if(i.user==="USLACKBOT"&&i.bot_id?(n=TS.interop.bots.getBotById(i.bot_id),n.is_bot=!0,n.is_service=!0):n=TS.interop.members.getMemberById(i.user),$(".file_header_container").html(TS.templates.file_header({file:i,download:i.mode==="hosted",member:n,is_post:i.mode==="space"||i.mode==="post",preview:!0})),i.mode==="email"){var o={file:i,show_file_actions_cog:!1,to_more_count:i.to.length-1,cc_more_count:i.cc.length-1};$("#file_page_email").html(TS.templates.file_email(o))}$("#file_public_link_revoker").bind("click",function(){TS.web.file.revokePublicURL(i)})}$("#snippet_expand_toggle").on("click",function(){$(this).find("i").toggleClass("hidden"),$("#page_contents").toggleClass("full_width");var e;TS.prefs.getPref("expand_snippets")?e=!1:e=!0,TS.prefs.setPrefLocal("expand_snippets",e),TS.prefs.setPrefByAPI({name:"expand_snippets",value:e})}),$(".guide_toggle").on("click",function(){$("#formatting_col").toggleClass("hidden"),$("#post_col").toggleClass("span_4_of_6 span_1_of_1"),$(".guide_toggle").toggleClass("hidden");var e;TS.prefs.getPref("posts_formatting_guide")?e=!1:e=!0,TS.prefs.setPrefLocal("posts_formatting_guide",e),TS.prefs.setPrefByAPI({name:"posts_formatting_guide",value:e})}),setTimeout(function(){$("#title").focus()},0)})},revokePublicURL:function(t){var l=TS.interop.i18n.t("Revoke public file link","files")(),i=`<p>${TS.interop.i18n.t("This will disable the Public Link for this file, and will cause any previously shared links to stop working.","files")()}</p>`;i+=TS.interop.i18n.t("Are you sure you want to revoke this public link?","files")(),TS.generic_dialog.start({title:l,body:i,show_cancel_button:!0,show_go_button:!0,go_button_text:TS.interop.i18n.t("Revoke it","files")(),go_button_class:"btn_warning",onGo:function(){$(".file_public_link_shared").slideToggle(100),TS.files.upsertAndSignal({id:t.id,public_url_shared:!1});const n=f(function(o,e){e.file&&TS.files.upsertAndSignal(e.file)},"apiResponseHandler");return TS.interop.api.callExpedited("files.revokePublicURL",{file:t.id}).then(function(o){let{data:e,args:s,request_id:a}=o;var r=!0;return n(r,e,s,a),{data:e,args:s,request_id:a}}).catch(function(o){let{data:e,args:s,request_id:a}=o;var r=!1;return n(r,e,s,a),{data:e,args:s,request_id:a}})}})},teamFileChanged:function(t){$(".file_public_link").attr("href",t.permalink_public),t.public_url_shared?$(".file_public_link_shared").slideDown(100):$(".file_public_link_shared").slideUp(100);var l=t.title;$("#file_title").html(l)},teamFileCommentDeleted:function(){},test:function(){return{_teamFileDeleted:u}}});var u=f(function(t){t==TS.web.file.file_id&&TS.generic_dialog.start({body:`<p>${TS.interop.i18n.t("This file has been deleted!","files")()}</p>`,show_cancel_button:!1,esc_for_ok:!0,onGo:function(){var l=TS.interop.environment.desktop_app_version!=null;l?window.close():document.location.replace("/files")},unique:`file_deleted_${t}`})},"_teamFileDeleted")})()}},[["fc/B","webpack.manifest"]]]);})();
